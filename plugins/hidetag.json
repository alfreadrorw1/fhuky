module.exports = {
    name: "Hidetag",
    command: ["h", "ht", "hidetag"],
    owner: true,
    execute: async (sock, m, { args }) => {
        const jid = m.key.remoteJid;

        // Cek apakah di dalam grup
        if (!jid.endsWith("@g.us")) {
            return sock.sendMessage(jid, { text: "❌ Hanya untuk grup!" }, { quoted: m });
        }

        try {
            // Ambil data member grup
            const groupMetadata = await sock.groupMetadata(jid);
            const participants = groupMetadata.participants;
            const mentions = participants.map(p => p.id);

            // Ambil teks dari argumen, kalau kosong pakai pesan default
            let text = args.join(" ");
            if (!text) text = "Tag All Members!";

            // Kirim pesan dengan mention tersembunyi (hidetag)
            await sock.sendMessage(jid, {
                text: text,
                mentions: mentions
            }, { quoted: m });

        } catch (e) {
            console.error("Hidetag Error:", e);
            await sock.sendMessage(jid, { text: "❌ Gagal mengambil data grup." }, { quoted: m });
        }
    }
}
